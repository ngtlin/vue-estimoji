import{r as t,h as i}from"./p-95c9f71a.js";import{r as n,i as r}from"./p-34897e50.js";function e(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}var o=function(){return n.Date.now()},u=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,f=parseInt;function v(t){if("number"==typeof t)return t;if(r(t))return NaN;if(e(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=e(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(u,"");var n=s.test(t);return n||c.test(t)?f(t.slice(2),n?2:8):a.test(t)?NaN:+t}var d=Math.max,l=Math.min;const h=class{constructor(i){t(this,i),this.artists=[],this.loading=!1,this.onChange=function(t){var i=!0,n=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return e(void 0)&&(i="leading"in void 0?!!(void 0).leading:i,n="trailing"in void 0?!!(void 0).trailing:n),function(t,i,n){var r,u,a,s,c,f,h=0,p=!1,m=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(i){var n=r,e=u;return r=u=void 0,h=i,s=t.apply(e,n)}function x(t){return h=t,c=setTimeout(b,i),p?g(t):s}function T(t){var n=t-f;return void 0===f||n>=i||n<0||m&&t-h>=a}function b(){var t=o();if(T(t))return $(t);c=setTimeout(b,function(t){var n=i-(t-f);return m?l(n,a-(t-h)):n}(t))}function $(t){return c=void 0,y&&r?g(t):(r=u=void 0,s)}function w(){var t=o(),n=T(t);if(r=arguments,u=this,f=t,n){if(void 0===c)return x(f);if(m)return clearTimeout(c),c=setTimeout(b,i),g(f)}return void 0===c&&(c=setTimeout(b,i)),s}return i=v(i)||0,e(n)&&(p=!!n.leading,a=(m="maxWait"in n)?d(v(n.maxWait)||0,i):a,y="trailing"in n?!!n.trailing:y),w.cancel=function(){void 0!==c&&clearTimeout(c),h=0,r=f=u=c=void 0},w.flush=function(){return void 0===c?s:$(o())},w}(t,500,{leading:i,maxWait:500,trailing:n})}(this.fetch)}fetch(t){t.length<3||(this.loading=!0,fetch(`https://itunes.apple.com/search?term=${encodeURI(t)}&entity=musicArtist&limit=10`,{method:"post"}).then(t=>t.json()).then(t=>this.artists=t.results.map(t=>t.artistName)).then(()=>this.loading=!1))}render(){return i("sdx-select",{label:"Your favourite artist on iTunes",placeholder:"Search artists...",changeCallback:t=>this.onChange(t[0]),keyboardBehavior:"autocomplete",filterFunction:()=>!0,loading:this.loading},this.artists.map(t=>i("sdx-select-option",null,t)))}};export{h as sdx_itunes_autocomplete}