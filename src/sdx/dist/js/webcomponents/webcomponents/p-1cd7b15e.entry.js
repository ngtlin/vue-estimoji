import{r as t,h as e}from"./p-95c9f71a.js";import{p as i}from"./p-30dd5ee1.js";import{a as r}from"./p-a449c1f7.js";const s={aluminium:"#dde3e7","aluminium-tint-2":"#e4e9ec",horizon:"#eef3f6",turquoise:"#0eaba9",azure:"#1781e3",iris:"#5944c6",orchid:"#a63297",pink:"#e61e64",light:"rgba(0, 0, 0, .1)",dark:"rgba(255, 255, 255, .4)"},a=class{constructor(e){t(this,e),this.viewBox=34,this.radius=16,this.segmentPaddingForSizeSmall=0,this.segmentPaddingForSizeMedium=3,this.hundredPercent=2*this.radius*Math.PI,this.animationDuration=300,this.data=[],this.value="",this.legendPosition="bottom",this.size="medium",this.backgroundTheme="light",this.dataState=[]}dataChanged(){this.dataState=i(this.data)||[]}componentWillLoad(){this.dataState=i(this.data)||[]}animateSegment(t,e){t.circle&&(t.circle.style.strokeDasharray="0 "+this.hundredPercent,e.add({targets:t.circle,begin:()=>t.circle.style.display="",strokeDasharray:`${t.width} ${this.hundredPercent}`,duration:this.animationDuration,easing:"easeInQuint"}))}animateLegendItem(t,e){t&&e.add({targets:t,opacity:1,duration:this.animationDuration,easing:"easeInQuint"})}dataToSegments(){const t="medium"===this.size?this.segmentPaddingForSizeMedium:this.segmentPaddingForSizeSmall,e=this.dataState.reduce((t,e)=>t+e.value,0),i=this.dataState.filter(i=>i.value/e*this.hundredPercent<t),r=i.reduce((t,e)=>t+e.value,0),s=360/this.hundredPercent*t;let a=s;return this.dataState.filter(({},t)=>"small"!==this.size||0===t).map(o=>{let n=o.value/(e-r)*(this.hundredPercent-t*i.length);n<t?n=0:n-=t;const p={d:o,width:n,rotation:a};return a+=this.widthToDeg(p.width)+s,p})}widthToDeg(t){return 360/this.hundredPercent*t}getComponentClassNames(){return{component:!0,[this.legendPosition]:!0,[this.size]:!0,[this.backgroundTheme]:!0}}hasLabelsOrSrHints(){return this.dataState.some(this.hasLabelOrSrHint)}hasLabelOrSrHint(t){return!!t.label||!!t.srHint}getSegmentColor(t){return t&&t.color?s[t.color]:s[this.backgroundTheme]}render(){const t=this.viewBox/2,i=r.timeline(),s=r.timeline();return e("div",{class:this.getComponentClassNames()},e("div",{class:"wrapper"},e("div",{class:"chart-container"},e("div",{class:"chart"},"small"===this.size&&e("svg",{viewBox:`0 0 ${this.viewBox} ${this.viewBox}`,style:{transform:`rotate(${this.widthToDeg(this.hundredPercent)}deg)`}},e("circle",{stroke:this.getSegmentColor(),cx:t,cy:t,r:this.radius})),this.dataToSegments().map(r=>e("svg",{key:Math.random(),viewBox:`0 0 ${this.viewBox} ${this.viewBox}`,style:{transform:`rotate(${r.rotation}deg)`}},e("circle",{ref:t=>this.animateSegment(Object.assign(Object.assign({},r),{circle:t}),i),style:{display:"none"},stroke:this.getSegmentColor(r.d),cx:t,cy:t,r:this.radius})))),e("div",{class:"metadata","aria-hidden":"true"},e("div",{class:"value"},this.value),"small"!==this.size&&e("div",{class:"description"},this.description))),this.hasLabelsOrSrHints()&&e("ul",{class:{legend:!0,"sr-only":"small"===this.size}},this.dataState.filter(this.hasLabelOrSrHint).map(t=>e("li",{key:Math.random(),ref:t=>this.animateLegendItem(t,s),style:{opacity:"0"}},e("span",{"aria-hidden":"true"},e("sdx-icon",{"icon-name":"icon-record-filled",style:{color:this.getSegmentColor(t)}})," ",t.label),t.srHint&&e("span",{class:"sr-only"},t.srHint))))))}static get watchers(){return{data:["dataChanged"]}}};a.style='@charset "UTF-8";:host,*,*:before,*:after{-webkit-box-sizing:border-box;box-sizing:border-box}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}.component{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.component.small .wrapper .chart-container .chart{height:64px;width:64px}.component.small .wrapper .chart-container .chart svg{height:64px;width:64px;stroke-linecap:butt}.component.small .wrapper .chart-container .metadata{font-size:16px;top:8px;right:8px;bottom:8px;left:8px}.component.bottom .wrapper{-ms-flex-direction:column;flex-direction:column;-ms-flex-preferred-size:100%;flex-basis:100%}.component.bottom .wrapper .legend{margin-top:24px;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%}.component.bottom .wrapper .legend li:not(:last-of-type){margin-right:24px}.component.right .wrapper .legend{margin-left:32px;-ms-flex-direction:column;flex-direction:column}.component.right .wrapper .legend li:not(:last-of-type){margin-bottom:8px}.component.dark .wrapper .chart-container .metadata,.component.dark .wrapper .chart-container .metadata .description{color:white}.component .wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.component .wrapper .chart-container{position:relative}.component .wrapper .chart-container .chart{-webkit-transform:rotate(-90deg);transform:rotate(-90deg);height:182px;width:182px}.component .wrapper .chart-container .chart svg{position:absolute;top:0;left:0;fill:transparent;stroke-width:2;stroke-linecap:round;height:182px;width:182px}.component .wrapper .chart-container .metadata{font-weight:400;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;line-height:28px;letter-spacing:-0.89px;font-size:32px;position:absolute;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;top:32px;right:24px;bottom:24px;left:24px}.component .wrapper .chart-container .metadata .description{font-size:16px;color:#666;white-space:nowrap;width:100%;overflow:hidden;text-overflow:ellipsis;text-align:center}.component .wrapper .legend{display:-ms-flexbox;display:flex;list-style:none;padding:0;font-weight:300;-ms-flex-pack:center;justify-content:center;margin:0}.component .wrapper .legend li{white-space:nowrap}';export{a as sdx_pie_chart}